<!doctype html>
<html lang="zh-Hans">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>新兴革命党的调查报告</title>
    <style>
        body {
            margin: 0;
            background: #0f1220;
            color: #e8ecff;
            font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "PingFang TC", "Noto Sans CJK", sans-serif
        }

        .splash {
            position: fixed;
            inset: 0;
            display: grid;
            place-items: center;
            background: #0f1220;
            z-index: 9999
        }

        .brand {
            font-size: 40px;
            letter-spacing: .2em;
            opacity: 0;
            filter: blur(6px);
            animation: reveal 1.4s ease-out forwards .2s
        }

        @keyframes reveal {
            0% {
                opacity: 0;
                letter-spacing: .35em;
                filter: blur(6px)
            }

            70% {
                opacity: 1
            }

            100% {
                opacity: 1;
                letter-spacing: .08em;
                filter: blur(0)
            }
        }

        main {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px
        }

        h1 {
            text-align: center
        }

        .question {
            margin: 16px 0;
            padding: 12px;
            border: 1px solid #333;
            border-radius: 8px;
            background: #141935
        }

        .qtext {
            font-weight: bold;
            margin-bottom: 8px
        }

        textarea {
            width: 80%;
            padding: 8px;
            background: #0e1430;
            border: 1px solid #333;
            border-radius: 6px;
            color: #e8ecff
        }

        button {
            margin-top: 20px;
            padding: 12px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: #5f8cff;
            color: #fff;
            font-weight: bold
        }
    </style>
</head>

<body>
    <div class="splash" id="splash">
        <div class="brand">新兴革命党</div>
    </div>

    <main id="app">
        <h1>新兴革命党的调查报告</h1>
        <form id="survey">

            <div class="question">
                <div class="qtext">1.请写下你对于学校是否需要有党派的意见</div>
                <textarea name="q1" rows="3"></textarea>
            </div>

            <div class="question">
                <div class="qtext">2.请写下你对于方的意见</div>
                <textarea name="q2" rows="3"></textarea>
            </div>

            <div class="question">
                <div class="qtext">3.若你对方的意见属于不好的，请说明你认为该怎么改变</div>
                <textarea name="q3" rows="3"></textarea>
            </div>

            <div class="question">
                <div class="qtext">4.你是否认同霸凌方是可以改变他的恶行</div>
                <textarea name="q30" rows="3"></textarea>
            </div>

            <div class="question">
                <div class="qtext">5.若不认可霸凌他，是否觉得刘宥泽革命方案有误</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">6.请问你是否认可刘宥泽继续连任党主席</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">7.若不认可连任，你认为班上谁可以胜任新兴革命党党主席</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">8.请写下你对于陈杰安为现任党主席的看法</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">9.若不认可陈杰安，是否认可政变将陈杰安刺杀</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">10.你是否认可刘学昇当上新兴革命党党主席呢</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">11.若不认可，觉得哪里需要改善</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">12.你是否觉得应该要“先居上位者，而后革命”呢</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">13.你觉得刘宥泽的革命计划有达到成效吗？方有因此改善自我吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">14.你是否认为刘学昇在任期间，有做出任何对党贡献</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">15.若不认可，你是否接受刘所说的，“正在准备阶段”</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">16.你觉得要改变方的上课睡觉问题吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">17.你觉得要改变方的买鸡薯薯不买猪排饭问题吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">18.你觉得要改变方的不说话问题吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">19.你觉得要改变方的坐姿吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">20.你觉得要改变方的站姿吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">21.你觉得要改变方的考试全猜问题吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">22.你觉得要改变方的装死问题吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">23.你觉得方哪个部分最需要做改善，以此作为我们革命重心</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">24.你觉得陈杰安是否为新兴革命党的黑色亚洲奴隶呢</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">25.对于新兴革命党在这个班的贡献看法为何</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">26.你认为鑫币的命名方式是否为新币通用</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">27.你觉得党要采记那种方式来上任党主席</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">28.对于新兴革命党的宪法有什么看法吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">29.对于新兴革命党的执政理念有什么看法吗</div>
                <textarea name="q30" rows="3"></textarea>
            </div>
            <div class="question">
                <div class="qtext">30.对于新兴革命党目前状况的评价为何</div>
                <textarea name="q30" rows="3"></textarea>
            </div>

            <button type="submit" id="submitBtn">送出</button>
        </form>
    </main>

   <script>
document.getElementById('survey').addEventListener('submit', submitSurvey);

async function submitSurvey(ev){
  ev.preventDefault();

  // 收集 30 题
  const data = {};
  for (let i = 1; i <= 30; i++) {
    const el = document.querySelector(`[name="q${i}"]`);
    data[`q${i}`] = el ? el.value : "";
  }

  // 发到同源的 Flask /api/submit
  try {
    const res = await fetch('/api/submit', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ title:'新兴革命党的调查报告', responses:data })
    });

    // 不论成功失败都往下看状态
    if (!res.ok) throw new Error('server not ok');

    // 成功 → 跳转 sc.html
    window.location.href = 'sc.html';
  } catch (err) {
    // 失败 → 给出提示，也打印到控制台
    alert('送出失败：请确认 app.py 有在运行，且用 http://127.0.0.1:5000 打开网页');
    console.error(err);
  }
}

window.addEventListener('DOMContentLoaded', () => {
  const splash = document.getElementById('splash');
  const app = document.getElementById('app');

  // 开场动画结束后，淡出开场并显示正文
  setTimeout(() => {
    if (!splash || !app) return;
    splash.style.transition = 'opacity .5s ease';
    splash.style.opacity = '0';
    splash.addEventListener('transitionend', () => {
      splash.style.display = 'none';
      app.style.display = 'block';
    }, { once: true });
  }, 1600); // 跟你的动画时长一致
});

</script>

</body>

</html>